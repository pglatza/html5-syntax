# #####################################################################
##  RELAX NG Schema for HTML 5: (Inline) Phrase Markup                #
# #####################################################################

## Contextual Hyperlink: <a>

	a.elem =
		element a { a.inner & a.attrs }
	a.elem.strict =
		element a { a.inner.strict & a.attrs }
	a.attrs =
		(	common.attrs
		&	a.attrs.href?
		&	a.attrs.target?
		&	a.attrs.rel?
		&	a.attrs.hreflang?
		&	a.attrs.media?
		&	a.attrs.type?
		&	a.attrs.ping?
		)
		a.attrs.href =
			attribute href {
				common.data.uri
			}
		a.attrs.target =
			attribute target {
				common.data.browsingcontext
			}
		a.attrs.rel =
			attribute rel {
				common.data.tokens
			}
		a.attrs.hreflang =
			attribute hreflang {
				common.data.langcode
			}
		a.attrs.media =
			attribute media {
				common.data.mediaquery
			}
		a.attrs.type =
			attribute type {
				common.data.mimetype
			}
		a.attrs.ping =
			attribute ping {
				common.data.uris
			} & v5only
	a.inner =
		(	common.inner.strict-inline.static
		|	(	common.inner.struct-inline.static
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	a.inner.strict =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= a.elem
	common.elem.strict-inline |= a.elem.strict

## Emphatic Stress: <em>

	em.elem =
		element em { em.inner & em.attrs }
	em.elem.static =
		element em { em.inner.static & em.attrs }
	em.elem.strict =
		element em { em.inner.strict & em.attrs }
	em.elem.strict.static =
		element em { em.inner.strict.static & em.attrs }
	em.attrs =
		( common.attrs )
	em.inner =
		(	common.inner.strict-inline
		|	(	common.inner.struct-inline
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	em.inner.static =
		(	common.inner.strict-inline.static
		|	(	common.inner.struct-inline.static
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	em.inner.strict =
		( common.inner.strict-inline )
	em.inner.strict.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= em.elem
	common.elem.struct-inline.static |= em.elem.static
	common.elem.strict-inline |= em.elem.strict
	common.elem.strict-inline.static |= em.elem.strict.static

## Strong Importance: <strong>

	strong.elem =
		element strong { strong.inner & strong.attrs }
	strong.elem.static =
		element strong { strong.inner.static & strong.attrs }
	strong.elem.strict =
		element strong { strong.inner.strict & strong.attrs }
	strong.elem.strict.static =
		element strong { strong.inner.strict.static & strong.attrs }
	strong.attrs =
		( common.attrs )
	strong.inner =
		(	common.inner.strict-inline
		|	(	common.inner.struct-inline
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	strong.inner.static =
		(	common.inner.strict-inline.static
		|	(	common.inner.struct-inline.static
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	strong.inner.strict =
		( common.inner.strict-inline )
	strong.inner.strict.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= strong.elem
	common.elem.struct-inline.static |= strong.elem.static
	common.elem.strict-inline |= strong.elem.strict
	common.elem.strict-inline.static |= strong.elem.strict.static

## Small Print and Side Comments: <small>

	small.elem =
		element small { small.inner & small.attrs }
	small.elem.static =
		element small { small.inner.static & small.attrs }
	small.elem.strict =
		element small { small.inner.strict & small.attrs }
	small.elem.strict.static =
		element small { small.inner.strict.static & small.attrs }
	small.attrs =
		( common.attrs )
	small.inner =
		(	common.inner.strict-inline
		|	(	common.inner.struct-inline
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	small.inner.static =
		(	common.inner.strict-inline.static
		|	(	common.inner.struct-inline.static
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	small.inner.strict =
		( common.inner.strict-inline )
	small.inner.strict.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= small.elem
	common.elem.struct-inline.static |= small.elem.static
	common.elem.strict-inline |= small.elem.strict
	common.elem.strict-inline.static |= small.elem.strict.static

## Marked (Highlighted) Text: <m>

	m.elem =
		element m { m.inner & m.attrs }
		& v5only
	m.elem.static =
		element m { m.inner.static & m.attrs }
		& v5only
	m.elem.strict =
		element m { m.inner.strict & m.attrs }
		& v5only
	m.elem.strict.static =
		element m { m.inner.strict.static & m.attrs }
		& v5only
	m.attrs =
		( common.attrs )
	m.inner = #REVISIT check HTML-compatibility
		( common.inner.struct-inline )
	m.inner.static =
		( common.inner.struct-inline.static )
	m.inner.strict =
		( common.inner.strict-inline )
	m.inner.strict.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= m.elem
	common.elem.struct-inline.static |= m.elem.static
	common.elem.strict-inline |= m.elem.strict
	common.elem.strict-inline.static |= m.elem.strict.static

## Abbreviation: <abbr>

	abbr.elem =
		element abbr { abbr.inner & abbr.attrs }
	abbr.elem.static =
		element abbr { abbr.inner.static & abbr.attrs }
	abbr.attrs =
		(	common.attrs
		#	abbr.attrs.title included in common.attrs
		)
	abbr.inner =
		( common.inner.strict-inline )
	abbr.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= abbr.elem
	common.elem.struct-inline.static |= abbr.elem.static
	common.elem.strict-inline |= abbr.elem
	common.elem.strict-inline.static |= abbr.elem.static

## Defining Instance: <dfn>

	dfn.elem =
		element dfn { dfn.inner & dfn.attrs }
	dfn.elem.static =
		element dfn { dfn.inner.static & dfn.attrs }
	dfn.attrs =
		(	common.attrs
		#	dfn.attrs.title included in common.attrs
		)
	dfn.inner =
		( common.inner.strict-inline )
	dfn.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= dfn.elem
	common.elem.struct-inline.static |= dfn.elem.static
	common.elem.strict-inline |= dfn.elem
	common.elem.strict-inline.static |= dfn.elem.static

## Italic: <i>

	i.elem =
		element i { i.inner & i.attrs }
	i.elem.static =
		element i { i.inner.static & i.attrs }
	i.attrs =
		( common.attrs )
	i.inner =
		( common.inner.strict-inline )
	i.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= i.elem
	common.elem.struct-inline.static |= i.elem.static
	common.elem.strict-inline |= i.elem
	common.elem.strict-inline.static |= i.elem.static

## Bold: <b>

	b.elem =
		element b { b.inner & b.attrs }
	b.elem.static =
		element b { b.inner.static & b.attrs }
	b.attrs =
		( common.attrs )
	b.inner =
		( common.inner.strict-inline )
	b.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= b.elem
	common.elem.struct-inline.static |= b.elem.static
	common.elem.strict-inline |= b.elem
	common.elem.strict-inline.static |= b.elem.static

## Code Fragment: <code>

	code.elem =
		element code { code.inner & code.attrs }
	code.elem.static =
		element code { code.inner.static & code.attrs }
	code.elem.strict =
		element code { code.inner.strict & code.attrs }
	code.elem.strict.static =
		element code { code.inner.strict.static & code.attrs }
	code.attrs =
		( common.attrs )
	code.inner =
		(	common.inner.strict-inline
		|	(	common.inner.struct-inline
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	code.inner.static =
		(	common.inner.strict-inline.static
		|	(	common.inner.struct-inline.static
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	code.inner.strict =
		( common.inner.strict-inline )
	code.inner.strict.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= code.elem
	common.elem.struct-inline.static |= code.elem.static
	common.elem.strict-inline |= code.elem.strict
	common.elem.strict-inline.static |= code.elem.strict.static

## Variable or Placeholder: <var>

	var.elem =
		element var { var.inner & var.attrs }
	var.elem.static =
		element var { var.inner.static & var.attrs }
	var.attrs =
		( common.attrs )
	var.inner =
		( common.inner.strict-inline )
	var.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= var.elem
	common.elem.struct-inline.static |= var.elem.static
	common.elem.strict-inline |= var.elem
	common.elem.strict-inline.static |= var.elem.static

## (Sample) Output: <samp>

	samp.elem =
		element samp { samp.inner & samp.attrs }
	samp.elem.static =
		element samp { samp.inner.static & samp.attrs }
	samp.elem.strict =
		element samp { samp.inner.strict & samp.attrs }
	samp.elem.strict.static =
		element samp { samp.inner.strict.static & samp.attrs }
	samp.attrs =
		( common.attrs )
	samp.inner =
		(	common.inner.strict-inline
		|	(	common.inner.struct-inline
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	samp.inner.static =
		(	common.inner.strict-inline.static
		|	(	common.inner.struct-inline.static
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	samp.inner.strict =
		( common.inner.strict-inline )
	samp.inner.strict.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= samp.elem
	common.elem.struct-inline.static |= samp.elem.static
	common.elem.strict-inline |= samp.elem.strict
	common.elem.strict-inline.static |= samp.elem.strict.static

## User Input: <kbd>

	kbd.elem =
		element kbd { kbd.inner & kbd.attrs }
	kbd.elem.static =
		element kbd { kbd.inner.static & kbd.attrs }
	kbd.attrs =
		( common.attrs )
	kbd.inner =
		( common.inner.strict-inline )
	kbd.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= kbd.elem
	common.elem.struct-inline.static |= kbd.elem.static
	common.elem.strict-inline |= kbd.elem
	common.elem.strict-inline.static |= kbd.elem.static

## Superscript: <sup>

	sup.elem =
		element sup { sup.inner & sup.attrs }
	sup.elem.static =
		element sup { sup.inner.static & sup.attrs }
	sup.attrs =
		( common.attrs )
	sup.inner =
		( common.inner.strict-inline )
	sup.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= sup.elem
	common.elem.struct-inline.static |= sup.elem.static
	common.elem.strict-inline |= sup.elem
	common.elem.strict-inline.static |= sup.elem.static

## Subscript: <sub>

	sub.elem =
		element sub { sub.inner & sub.attrs }
	sub.elem.static =
		element sub { sub.inner.static & sub.attrs }
	sub.attrs =
		( common.attrs )
	sub.inner =
		( common.inner.strict-inline )
	sub.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= sub.elem
	common.elem.struct-inline.static |= sub.elem.static
	common.elem.strict-inline |= sub.elem
	common.elem.strict-inline.static |= sub.elem.static

## Quotation: <q>

	q.elem =
		element q { q.inner & q.attrs }
	q.elem.static =
		element q { q.inner.static & q.attrs }
	q.elem.strict =
		element q { q.inner.strict & q.attrs }
	q.elem.strict.static =
		element q { q.inner.strict.static & q.attrs }
	q.attrs =
		(	common.attrs
		&	q.attrs.cite?
		)
		q.attrs.cite =
			attribute cite {
				common.data.uri
			}
	q.inner =
		(	common.inner.strict-inline
		|	(	common.inner.struct-inline
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	q.inner.static =
		(	common.inner.strict-inline.static
		|	(	common.inner.struct-inline.static
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	q.inner.strict =
		( common.inner.strict-inline )
	q.inner.strict.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= q.elem
	common.elem.struct-inline.static |= q.elem.static
	common.elem.strict-inline |= q.elem.strict
	common.elem.strict-inline.static |= q.elem.strict.static

## Source Citation: <cite>

	cite.elem =
		element cite { cite.inner & cite.attrs }
	cite.elem.static =
		element cite { cite.inner.static & cite.attrs }
	cite.attrs =
		( common.attrs )
	cite.inner =
		( common.inner.strict-inline )
	cite.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= cite.elem
	common.elem.struct-inline.static |= cite.elem.static
	common.elem.strict-inline |= cite.elem
	common.elem.strict-inline.static |= cite.elem.static

## Generic Span: <span>

	span.elem =
		element span { span.inner & span.attrs }
	span.elem.static =
		element span { span.inner.static & span.attrs }
	span.elem.strict =
		element span { span.inner.strict & span.attrs }
	span.elem.strict.static =
		element span { span.inner.strict.static & span.attrs }
	span.attrs =
		( common.attrs )
	span.inner =
		(	common.inner.strict-inline
		|	(	common.inner.struct-inline
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	span.inner.static =
		(	common.inner.strict-inline.static
		|	(	common.inner.struct-inline.static
			&	nonRoundtrippable & nonHTMLizable
			)
		)
	span.inner.strict =
		( common.inner.strict-inline )
	span.inner.strict.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= span.elem
	common.elem.struct-inline.static |= span.elem.static
	common.elem.strict-inline |= span.elem.strict
	common.elem.strict-inline.static |= span.elem.strict.static

## Bidirectional Override: <bdo>

	bdo.elem =
		element bdo { bdo.inner & bdo.attrs }
	bdo.elem.static =
		element bdo { bdo.inner.static & bdo.attrs }
	bdo.attrs =
		(	common.attrs.basic
		&	common.attrs.present
		# List common.attrs.i18n explicitly
		& 	common.attrs.language?
		&	bdo.attrs.dir # required
		)
		bdo.attrs.dir =
			attribute dir {
				string "ltr" | string "rtl"
			}
	bdo.inner =
		( common.inner.strict-inline )
	bdo.inner.static =
		( common.inner.strict-inline.static )

	common.elem.struct-inline |= bdo.elem
	common.elem.struct-inline.static |= bdo.elem.static
	common.elem.strict-inline |= bdo.elem
	common.elem.strict-inline.static |= bdo.elem.static

## Line Break: <br>

	br.elem =
		element br { br.inner & br.attrs }
	br.attrs =
		( common.attrs )
	br.inner =
		( empty )

	common.elem.struct-inline |= br.elem
	common.elem.struct-inline.static |= br.elem
	common.elem.strict-inline |= br.elem
	common.elem.strict-inline.static |= br.elem
